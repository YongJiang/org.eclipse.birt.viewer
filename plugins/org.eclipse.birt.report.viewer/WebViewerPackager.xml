<?xml version="1.0"?>
<project name="BIRT Engine Project" default="ExportEngineSDK" basedir=".">
	
<description>Web Viewer Packager</description>
	<property name="export.dir" location="export" />
	
	<!-- Export Engine SDK -->
	<target name="ExportEngineSDK">
		<mkdir dir="${export.dir}"/>
		
		<mkdir dir="${export.dir}/configuration"/>
		<!-- copy config.ini to configuration/config.ini-->
		<copy todir="${export.dir}/configuration">
			<fileset dir="../org.eclipse.birt.report.engine">
				<include name="config.ini"/>
			</fileset>
		</copy>

		<!-- copy plugins needed in the system fold ./eclipse/plugins into the directory -->
		<mkdir dir="${export.dir}/plugins"/>
		<copy todir="${export.dir}/plugins">
			<fileset dir="${base.location}/plugins">
				<include name="org.eclipse.core.runtime.compatibility.registry_*/**"/>
				<!-- <include name="org.eclipse.core.runtime.compatibility.registry_*.jar"/> -->
				<include name="org.junit_*/**"/>
				<!-- <include name="org.junit_*.jar"/> -->
				<include name="com.ibm.icu_*.jar"/>
				<include name="org.eclipse.core.contenttype_*.jar"/>
				<include name="org.eclipse.core.jobs_*.jar"/>
				<include name="org.eclipse.core.runtime.compatibility_*.jar"/>
				<include name="org.eclipse.core.runtime_*.jar"/>
				<include name="org.eclipse.emf.common_*.jar"/>
				<include name="org.eclipse.emf.ecore.xmi_*.jar"/>
				<include name="org.eclipse.emf.ecore_*.jar"/>
				<include name="org.eclipse.emf_*.jar"/>
				<include name="org.eclipse.equinox.common_*.jar"/>
				<include name="org.eclipse.equinox.preferences_*.jar"/>
				<include name="org.eclipse.equinox.registry_*.jar"/>
				<include name="org.eclipse.osgi_*.jar"/>
				<include name="org.eclipse.update.configurator_*.jar"/>
			</fileset>
		</copy>
		
		<!-- other plugins provided by the 3rd party -->
		
		<!-- com.lowagie.itext -->
		<copy todir="${export.dir}/plugins/com.lowagie.itext">
			<fileset dir="../com.lowagie.itext">
				<include name="META-INF/MANIFEST.MF"/>
				<exclude name="lib/*.jar"/>
				<include name="about.html"/>
				<include name="about_files/**"/>
				<include name="plugin.*"/>
			</fileset>
		</copy>		
		
		<!-- org.apache.commons.codec -->
		<copy todir="${export.dir}/plugins/org.apache.commons.codec">
			<fileset dir="../org.apache.commons.codec">
				<include name="META-INF/MANIFEST.MF"/>
				<include name="lib/*.jar"/>
				<include name="about.html"/>
				<include name="about_files/**"/>
				<include name="plugin.*"/>
			</fileset>
		</copy>
		
		<!-- org.apache.xerces -->
		<copy todir="${export.dir}/plugins/org.apache.xerces">
			<fileset dir="../org.apache.xerces">
				<include name="META-INF/MANIFEST.MF"/>
				<include name="*.jar"/>
				<include name="about.html"/>
				<include name="about_files/**"/>
				<include name="plugin.*"/>
			</fileset>
		</copy>
		
		<!-- org.apache.batik -->
		<copy todir="${export.dir}/plugins/org.apache.batik">
			<fileset dir="../org.apache.batik">
				<include name="META-INF/MANIFEST.MF"/>
				<include name="lib/*.jar"/>
				<include name="about.html"/>
				<include name="about_files/**"/>
				<include name="plugin.*"/>
			</fileset>
		</copy>
		
		<!-- org.apache.batik.pdf -->
		<copy todir="${export.dir}/plugins/org.apache.batik.pdf">
			<fileset dir="../org.apache.batik.pdf">
				<include name="META-INF/MANIFEST.MF"/>
				<include name="lib/*.jar"/>
				<include name="about.html"/>
				<include name="about_files/**"/>
				<include name="plugin.*"/>
			</fileset>
		</copy>
		
		<!-- org.mozilla.rhino_1.0.0 -->
		<copy todir="${export.dir}/plugins/org.mozilla.rhino">
			<fileset dir="../org.mozilla.rhino">
				<include name="META-INF/MANIFEST.MF"/>
				<include name="lib/*.jar"/>
				<include name="about.html"/>
				<include name="about_files/**"/>
				<include name="plugin.*"/>
			</fileset>
		</copy>		
		
		<!-- org.w3c.sac_1.0.0 -->
		<copy todir="${export.dir}/plugins/org.w3c.sac">
			<fileset dir="../org.w3c.sac">
				<include name="META-INF/MANIFEST.MF"/>
				<include name="lib/*.jar"/>
				<include name="about.html"/>
				<include name="about_files/**"/>
				<include name="plugin.*"/>
			</fileset>
	    </copy>
		
		<!-- org.apache.derby.core -->
		<copy todir="${export.dir}/plugins/org.apache.derby.core">
			<fileset dir="../org.apache.derby.core">
				<include name="META-INF/MANIFEST.MF"/>
				<include name="*.jar"/>
				<include name="about.html"/>
				<include name="about_files/**"/>
				<include name="plugin.*"/>
			</fileset>
		</copy>
		
		<!-- core plugins -->
		<!-- org.eclipse.birt.core_2.1.0.jar -->
		<ant dir="../org.eclipse.birt.core" antfile="BuildCore.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>		
		
		<!-- data plugins -->
		<!-- org.eclipse.birt.data.oda_2.0.2.200603210703.jar -->
		<ant dir="../org.eclipse.birt.data.oda" antfile="BuildOda.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
		
		<!-- org.eclipse.birt.data_2.1.0.jar -->
		<ant dir="../org.eclipse.birt.data" antfile="BuildData.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
		
		<!-- model plugins-->
		<!-- org.eclipse.birt.report.model_2.1.0.jar -->
		<ant dir="../org.eclipse.birt.report.model" antfile="BuildModel.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>	
		
		<!-- engine plugins -->
		<!-- org.eclipse.birt.report.engine_2.1.0.jar -->
		<ant dir="../org.eclipse.birt.report.engine" antfile="BuildEngine.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>	
	
		<!-- org.eclipse.birt.report.data.oda.jdbc_2.1.0.N20060313-2230 -->
		<ant dir="../org.eclipse.birt.report.data.oda.jdbc" antfile="BuildOdaJdbc.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
		
		<!-- org.eclipse.birt.report.data.oda.sampledb_2.1.0.N20060313-2230 -->
		<ant dir="../org.eclipse.birt.report.data.oda.sampledb" antfile="BuildSampleDB.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
		
		<!-- org.eclipse.birt.report.data.oda.xml_2.1.0.N20060313-2230 -->
		<ant dir="../org.eclipse.birt.report.data.oda.xml" antfile="buildXML.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>

		<!-- engine extensions -->
		<!-- org.eclipse.birt.report.engine.emitter.html_2.1.0.jar -->
		<ant dir="../org.eclipse.birt.report.engine.emitter.html" antfile="BuildHtmlEmitter.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>		
		
		<!-- org.eclipse.birt.report.engine.emitter.pdf_2.1.0.jar -->
		<ant dir="../org.eclipse.birt.report.engine.emitter.pdf" antfile="BuildEnginePDF.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
		
		<!-- org.eclipse.birt.report.engine.fonts -->
		<ant dir="../org.eclipse.birt.report.engine.fonts" antfile="BuildEngineFonts.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
		
		
		<!-- chart engine -->
		<!-- org.eclipse.birt.chart.engine_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.engine" antfile="BuildChartEngine.xml" target="Jar" inheritAll="false" inheritRefs="false" >
			<property name="eclipse.home" value="${base.location}" />
		</ant>
		
		<!-- chart extensions -->
		<!-- org.eclipse.birt.chart.device.extension_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.device.extension" antfile="BuildChartDeviceExtension.xml" target="Jar" inheritAll="false" inheritRefs="false" >
			<property name="eclipse.home" value="${base.location}" />
		</ant>	
		
		<!-- org.eclipse.birt.chart.device.svg_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.device.svg" antfile="BuildChartDeviceSVG.xml" target="Jar" inheritAll="false" inheritRefs="false" >
			<property name="eclipse.home" value="${base.location}" />
		</ant>	
		
		<!-- org.eclipse.birt.chart.engine.extension_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.engine.extension" antfile="BuildChartEngineExtension.xml" target="Jar" inheritAll="false" inheritRefs="false" >
			<property name="eclipse.home" value="${base.location}" />
		</ant>
		
		<!-- org.eclipse.birt.chart.reportitem_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.reportitem" antfile="BuildChartReportItem.xml" target="Jar" inheritAll="false" inheritRefs="false" >
			<property name="eclipse.home" value="${base.location}" />
		</ant>
		
		<ant dir="../org.eclipse.birt.chart.engine" antfile="BuildChartEngine.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
		
		<!-- chart extensions -->
		<!-- org.eclipse.birt.chart.device.extension_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.device.extension" antfile="BuildChartDeviceExtension.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>	
		
		<!-- org.eclipse.birt.chart.device.svg_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.device.svg" antfile="BuildChartDeviceSVG.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>	
		
		<!-- org.eclipse.birt.chart.engine.extension_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.engine.extension" antfile="BuildChartEngineExtension.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
		
		<!-- org.eclipse.birt.chart.reportitem_2.1.0.200603211010.jar -->
		<ant dir="../org.eclipse.birt.chart.reportitem" antfile="BuildChartReportItem.xml" target="Export" inheritAll="false" inheritRefs="false" >
			<property name="export.dir" value="${export.dir}/plugins/" />
		</ant>
				
		
		<!-- DTP　plugins -->
		<!-- org.eclipse.datatools.connectivity_0.7.0.200602241 -->	
		<copy todir="${export.dir}/plugins">
			<fileset dir="${base.location}/plugins">
				<include name="org.eclipse.datatools.connectivity_*/**" />
				<include name="org.eclipse.datatools.connectivity.oda*/**" />
				<include name="org.eclipse.datatools.enablement.oda.xml_*/**" />
			</fileset>
		</copy>

		<mkdir dir="${export.dir}/lib"/>
		<copy todir="${export.dir}/lib">
			<fileset dir="${export.dir}/plugins">
				<include name="com.ibm.icu_*.jar"/>
			</fileset>
		</copy>
		<copy todir="${export.dir}/lib">
			<fileset dir="../org.eclipse.birt.core">
				<include name="coreapi.jar"/>
			</fileset>
			<fileset dir="../org.eclipse.birt.data">
				<include name="dteapi.jar"/>
			</fileset>
			<fileset dir="../org.eclipse.birt.report.model">
				<include name="modelapi.jar"/>
			</fileset>
			<fileset dir="../org.eclipse.birt.report.engine">
				<include name="engineapi.jar"/>
				<include name="scriptapi.jar"/>
			</fileset>
			<fileset dir="../org.eclipse.birt.report.data.adapter">
				<include name="dataadapterapi.jar"/>
			</fileset>
			<fileset dir="../org.eclipse.birt.report.engine/lib">
				<include name="commons-cli*.jar"/>
			</fileset>
			<fileset dir="../org.apache.commons.codec/lib">
				<include name="*.jar"/>
			</fileset>
			<fileset dir="../org.mozilla.rhino/lib">
				<include name="*.jar"/>
			</fileset>
			<fileset dir="../org.w3c.sac/lib">
				<include name="*.jar"/>
			</fileset>
		</copy>
	</target>
</project>